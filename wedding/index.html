<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nina & Ameet - Wedding</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’•</text></svg>">
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Background Canvas for Animations -->
    <canvas id="backgroundCanvas"></canvas>
    
    <!-- Floating Elements Container -->
    <div id="floatingElements"></div>
    
    <!-- Navigation -->
    <nav class="wedding-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">Nina & Ameet</a>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link active">RSVP</a>
                <a href="schedule.html" class="nav-link">Schedule</a>
                <a href="travel.html" class="nav-link">Travel</a>
                <a href="story.html" class="nav-link">Our Story</a>
                <a href="registry.html" class="nav-link">Registry</a>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Hero Section with Photo -->
        <div class="hero-section">
            <header class="hero">
                <div class="hero-content">
                    <h1 class="main-title">Wedding Details</h1>
                    <h2 class="couple-names">Can you make it?</h2>
                    <p class="rsvp-deadline">Please let us know by Feb 1</p>
                    
                    <div class="date-location">
                        <div class="date">
                            <i class="fas fa-calendar-alt"></i>
                            <span>June 19 - 21, 2026</span>
                        </div>
                        <div class="location">
                            <i class="fas fa-map-marker-alt"></i>
                            <div class="location-details">
                                <span>Aix-en-Provence</span>
                                <a href="https://maps.app.goo.gl/fsv7D3LjJgHGuzTY7" target="_blank" class="venue-link">Le Mas D'entremont</a>
                            </div>
                        </div>
                    </div>

                    <div class="countdown" id="countdown">
                        <div class="countdown-item">
                            <span class="countdown-number" id="days">000</span>
                            <span class="countdown-label">Days</span>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" onclick="showForm('planning')">
                            <i class="fas fa-check-circle"></i>
                            Yes, I'll be there!
                        </button>
                        <button class="btn btn-secondary" onclick="showForm('cant-make-it')">
                            <i class="fas fa-times-circle"></i>
                            I can't make it
                        </button>
                        <button class="btn btn-secondary" onclick="showUpdateForm()">
                            <i class="fas fa-edit"></i>
                            Update RSVP
                        </button>
                    </div>
                </div>
            </header>

            <!-- Couple Photo Section -->
            <section class="couple-photo">
                <div class="photo-container">
                    <img src="../ninameet-photo.jpeg" alt="Nina & Ameet" class="couple-image" id="mainPhoto">
                    <div class="photo-hint">ðŸ¥š</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Form Modal -->
    <div class="modal" id="formModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="formTitle">Tell us more!</h3>
            <form id="rsvpForm" onsubmit="submitForm(event)">
                <div class="form-group">
                    <label for="fullName">Full Name *</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" placeholder="Optional">
                </div>
                
                <div class="form-group">
                    <label>I will be attending...</label>
                    <div id="attendanceOptions" class="attendance-options">
                        <label><input type="checkbox" class="attend-option" value="Friday Night Welcome + Cabaret" id="opt-friday"> Friday Night Welcome + Cabaret</label>
                        <label><input type="checkbox" class="attend-option" value="Saturday Morning Games" id="opt-sat-games"> Saturday Morning Games</label>
                        <label><input type="checkbox" class="attend-option" value="Saturday Wedding Ceremony" id="opt-sat-ceremony"> Saturday Wedding Ceremony</label>
                        <label><input type="checkbox" class="attend-option" value="Sunday Breakfast" id="opt-sun-breakfast"> Sunday Breakfast</label>
                        <label><input type="checkbox" class="attend-option" value="None, I can't make it :(" id="opt-none"> None, I can't make it :(</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="question">We'd love your wisdom!</label>
                    <textarea id="question" name="question" rows="4" placeholder="As we prepare for this new chapter, we invite you to share a question - something thought-provoking, fun, or heartfelt - that you think every couple should consider as they enter married life."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <!-- Email Lookup Modal -->
    <div class="modal" id="lookupModal">
        <div class="modal-content">
            <span class="close" onclick="closeLookupModal()">&times;</span>
            <h3>Find Your RSVP</h3>
            <p style="margin-bottom: 20px;">Enter the email address you used when you first RSVP'd:</p>
            <div class="form-group">
                <input type="email" id="lookupEmail" placeholder="your.email@example.com" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;" onkeypress="if(event.key==='Enter') findRSVP()">
            </div>
            <p id="lookupError" style="display: none; color: #ef4444; margin: 10px 0; font-weight: 500;">
                <i class="fas fa-exclamation-circle"></i> No RSVP found with that email address.
            </p>
            <p id="lookupLoading" style="display: none; color: #fbbf24; margin: 10px 0;">
                <i class="fas fa-spinner fa-spin"></i> Searching...
            </p>
            <button class="btn btn-primary" onclick="findRSVP()" style="width: 100%; margin-top: 10px;">
                <i class="fas fa-search"></i> Find My RSVP
            </button>
        </div>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content success-content">
            <div class="success-icon">ðŸŽ‰</div>
            <h3>Thank you!</h3>
            <p>Your response has been received. We can't wait to celebrate with you!</p>
            <button class="btn btn-primary" onclick="closeSuccessModal()">Close</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs, doc, updateDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB108IDQksvWLhANDsTm04lVl3fvjlULWY",
            authDomain: "ninameet-1eb2e.firebaseapp.com",
            projectId: "ninameet-1eb2e",
            storageBucket: "ninameet-1eb2e.firebasestorage.app",
            messagingSenderId: "819954601528",
            appId: "1:819954601528:web:bcfdfba23fb7fa119020cd"
        };

        // Initialize Firebase
        try {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            // Make Firebase functions available globally
            window.firebaseDB = db;
            window.firebaseCollection = collection;
            window.firebaseAddDoc = addDoc;
            window.firebaseServerTimestamp = serverTimestamp;
            window.firebaseQuery = query;
            window.firebaseWhere = where;
            window.firebaseGetDocs = getDocs;
            window.firebaseDoc = doc;
            window.firebaseUpdateDoc = updateDoc;
            
            console.log('Firebase initialized successfully');
        } catch (error) {
            console.error('Firebase initialization error:', error);
            console.log('Form submissions will be stored locally');
        }
    </script>
    
    <script src="../script.js"></script>
</body>
</html>
